<div *ngIf="landing">
  <form class="stage-form">
    <input #codeInput placeholder="Enter Show Code"/>
    <button (click)="enterCode(codeInput.value)">Enter</button>
  </form>
</div>
<ng-container *ngIf="!landing">
  <div class="stage__setup" [class.stage__setup--hide]="!setupMode">
    <p>Welcome! Take a moment to make sure you can hear the live audio-stream.</p>
    <p>Click "Play" if it is not already playing.</p>
    <p>Then, click 'Watch show' once you are ready to join.</p>
    <br />
    <div style="display: flex">
      <span *ngFor="let color of colors" [style.background]="color" style="width: 10px; height: 30px; color: white">9</span>
    </div>
    <iframe src="https://mixlr.com/users/7822221/embed"
      width="100%"
      height="180px"
      scrolling="no"
      frameborder="no"
      marginheight="0"
      marginwidth="0"></iframe>
    <br />
    <button class="stage__setup-button" (click)="setupMode = false">Watch Show</button>
    <br />
    <button class="stage__setup-button" (click)="configDelay()">Config Delay</button>
    <p>Delay: {{ delay }}s</p>
  </div>

  <div
    *ngIf="setupMode === false"
    class="main-content"
    id="scroller"
    [class.theme--light]="theme === 'light'"
    [class.theme--dark]="theme === 'dark'"
  >
    <div
      [class.invisible]="!showRamp"
      class="ramp up"
      [class.dark]="theme === 'dark'"
      [class.light]="theme === 'light'"
    ></div>

    <div class="feedWrapper" #scroller>
      <feed
        [user]="id"
        [feedDebounce]="debounceTime"
        (advanceScroll)="onAdvanceScroll($event)"
        (finishedTyping)="onFinishTyping($event)"
        (currentBlock)="onCurrentBlockChange($event)">
      </feed>
    </div>

    <div
      [class.invisible]="!showRamp"
      class="ramp down"
      [class.dark]="theme === 'dark'"
      [class.light]="theme === 'light'"
    >
    </div>
  </div>

  <div (keyup.enter)="submit(input)"
    *ngIf="currentBlock"
    [style.marginBottom.px]="(mode !== 'chat') ? -120 : 0"
    class="stage__chat-wrapper">
    <input [disabled]="mode !== 'chat'" #input class="stage__chat-input" placeholder="Type something">
    <button class="stage__chat-button" (click)="submit(input)">SEND</button>
  </div>
</ng-container>

<nav *ngIf="setupMode === true" class="goodthings-nav">
  <a href="/">Home</a>
  <a href="/program">Program</a>
  <a href="/stage">Stage</a>
</nav>
